---
tags:
  - maths curves
---

# 1. 概述

## 1.1 基本概念与用途

### 1.1.1 基本概念

回旋曲线又被称为欧拉螺线或羊角螺线，其特征是曲线上点的曲率与沿曲线移动的距离成正比，也就是说，它的曲率随着曲线长度线性改变。

### 1.1.2 用途

由于该曲线的特点，回旋曲线经常被用于解决道路安全工程的问题。试想我们开车疾驰在一条笔直的公路上，前方突然出现90度转弯此时受向心力和巨大惯性的影响，车子会出现倾覆颠簸，甚至翻车。

![[Pic_146.jpeg]]

这是因为沿直线移动时直线的曲率为0，而当突然出现90度转弯时，此时曲率会发生一个突变。我们知道，圆上任意一点的$曲率(k)$就等于$半径(r)$的倒数，$k = 1 / r$(高中数学)。而向心力产生的向心加速度与圆的半径成反比: $a = v² / r = v²k$(高中物理)。因此在不降低的前提下过90度弯时，随着转弯半径越小产生的颠簸感和离心力会越大。因此在道路设计时处于安全性的考虑，常常利用回旋曲线的特征设计道路轨迹。

在游戏开发中也经常利用回旋曲线设计更为合理平滑的移动轨迹。例如对于大型的四足动物成巨型的卡车，我们常常需要其以指定的方向到达特定目标(例如:卡车希望移动到停车位时，朝向恰好是车位的方向，四动物移动到目标点时，朝向恰好是正对着玩家等)。此时我们就可以利用回旋曲线根据当前位置朝向目标位置，朝向生成一条平滑的路径轨迹。

## 1.2 回旋曲线的基本属性

在分析和推导回旋曲线之前，我们先来明确几个概念和符号以方便理解。由于回旋曲线研究的是曲率与弧长的变化关系，我们需要$曲率(k)$$弧长(l)$这两个属性。用数学符号表示曲率于弧长成正比则有: $k = c * l (c 为常数)$，由于曲率等于圆半径的倒数，因此: $k = 1 / l = c * l (r为曲率半径)$。进而可以推导出: $r * l = 1 / c$ ,由于$c$是常数，$1 / c$也为常数，因此我们得到结论，回旋曲线的曲线半径与弧长的乘积为常数即: $r * l = c$。这也就意味着曲线，半径$r$与弧长$l$成反比，因此回旋曲线的形状如下所示:

![[Pic_147.jpeg]]

而整个回旋曲线的计算公式，我们也可以抽象为: $α(s) = (x(s), y(s))$，其中$α(s)$表示曲线在弧长为$s$处的位置，$x(s) y(s)$分别表示在弧长$s$处$x$轴坐标和y$轴坐标。而在曲线上任意位置的切线方向也就是速度方向则为：

![[Pic_148.jpeg]]

而由于曲率描述的是切线方向的变化率，因此弧长为s位置的曲率为:

![[Pic_149.jpeg]]

# 2. 回旋曲线的计算推导

根据上文中的内容，对回旋曲线方程的计算就变成了已知: $r * s = A²$ (为了统一此处弧长用$s$表示)，求解曲线上任意弧长位置坐标的问题(也就是求解$α(s) = (x(s), y(s))$)。

我们先将回旋曲线细分为无数个小段(利用微分计算)，每个小段内的曲线长度$ds$就等于此处的曲率半径$r(s)$乘以此处的角度变化(弧长计算公式),如下图:

![[Pic_150.jpeg]]

时根据弧长计算公式我们有: $ds=r(s)*dψ$ ($dψ$表示曲线在$s$处位置附近的角度变化)。而根据回旋曲线的属性公式我们知道：$r(s) * s = A²$，由此我们就可以推导出：$dψ / ds = s / A²$。
时根据弧长计算公式我们有: $ds=r(s)*dψ$ ($dψ$表示曲线在s处位置附近的角度变化)。而根据回旋曲线的属性公式我们知道：$r(s) * s = A²$，由此我们就可以推导出：$dψ / ds = s / A²$。
可到了曲线上距离$s$处的角度$ψ$，我们就可以计算此处曲线上的位置坐标。假定在$s$处的角度为$ψ$，在其后一个非常微小的距离$ds$处，我们可以近似认为此时的弧长约等于弦长，进而可以计算出此处的$xy$坐标，如下图所示：

![[Pic_151.jpeg]]

如图所示，根据相似三角形原理，我们可以知道$dx ds$夹角也为$ψ$，此时$cosψ(s) ≈ dx / ds，sinψ(s) ≈ dy / ds$。我们已经知道$ψ(s) = s² / 2A²$，因此：$dx = cos(s² / 2A²)ds dy = sin(s² / A²)ds$。接下来只需要对其进行积分，就可以计算出xy的坐标。$x=∫cos(s²/2A²)ds，y=∫sin(s² /2A²)ds$。
此时只剩最后一个问题，如何把复杂的$sin,cos$表达式进行积分？此时我们想到了泰勒公式。其具体内容如下图所示：

![[Pic_152.jpeg]]

因此我们可以把复杂的$sin，cos$表达式使用泰勒多项式逼近，如下图所示：

![[Pic_153.jpeg]]

对其进行积分处理后，可以得到一个泰勒多项式的逼近公式，如下图所示：

![[Pic_154.jpeg]]
