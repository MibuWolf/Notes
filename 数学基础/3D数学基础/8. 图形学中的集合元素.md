
---
tags:
  - maths
---

# 直线，射线，线段

直线的方程式是: $ax + by +c z + d = 0$ 因此可以使用$(a,b,c,d)$来表示直线。线段可以直接用两个点来表示，图形学中的射线并非从一个顶点出发沿一个方向无限延长，更多的时候是用一个点出发沿一个方向多远来表示射线(如：鼠标拾取等)因此射线用一个点和一个方向来表示$(p,n)$ $p$为起点 $n$为方向如果需要再添加距离$d$。

# 球

球的数学模型在图形学中也经常用到(eg:包围球)球可以用一个中心点$p$和半径$r$来表示$(p,r)$。任意点与中心点的距离大于半径$r$则表示点在球外小于半径$r$则表示点在求内。2D圆的周长 = $2Pi*r 2D$圆的面积 = $Pi * r^2$   3D球的表面积 = $4Pi*r^2$球的体积 = $4/3 * Pi *r^3$

# 包围盒

在图形学中比包围球使用更广泛的是包围盒，包围盒的本质数学模型是立方体可以由该立方体的左下右上两个点来表示: $pmin = (xmin, ymin, zmin)$   $pmax = (xmax,ymax,zmax)$分别表示立方体左下角和右上角两点坐标。一般构建的包围盒的六个面分别以对应的坐标轴平行。根据构建包围盒的轴向不同可以将包围盒分为AABB包围盒(以固定轴向如世界空间坐标轴)和OBB包围盒(以自身坐标系轴向)。

# 平面

## 平面方程定义

由几何知识可知任意平面可以用方程式:  $ax+by+cz=d$来表示平面上的任一点$(a,b,c,d)$。其中$(a,b,c)$组成的向量$n$为该平面的法向量，$d$为原点到该平面的距离。

## 三点式平面定义

由三个不共线的点可以确定唯一的平面，首先三个点不共线可以任意两个点组成两个向量，两个向量的叉乘的结果就是平面的法线向量$(a,b,c)$将任意一个点代入$ax+by+cz=d$的平面方程就可以计算出$d$。因此三个点也可以确定一个平面。

## 点与平面的关系

有平面公式$ax+by+cz=d$可以将平面公式转化为： $ax + by + cz -d = 0$。将任意点平坐标代入以上公式得出数值为0表示在平面上，大于0表示在平面上(法线方向)，小于0表示在平面背面(法线反方向)

# 三角形

## 三角形定义

三角形由三个顶点组成，一般来说三个顶点定义的顺序是顺时针的三个点:   $v1, v2, v3$。 定义三个边向量为: $e1 = v3-v2$  $e2 = v1 - v3$    $e3 = v2 -v1$。 三个边的边长为: $l1 = |e1|$  $l2 = |e2|$   $l3 = |e3|$   如下图：

![[Pic_034.png]]

## 三角形定律

$sinθ1 / l1 = sinθ2 / l2 = sinθ3 / l3$
$l1² = l2² + l3² - 2*l2*l3*cosθ1$
$l2² = l1² + l3² - 2*l1*l3*cosθ2$
$l3² = l1² + l2² - 2*l1*l2*cosθ3$
三角形周长 = $l1 + l2 + l3$
三角形面积 = $1/2 * |e1 X e2| = 1/2 * |e2 X e3| = 1/2 * |e1 X e3| = 1/2 *l1*l2*sinθ3$
除此之外三角形面积也可以用海伦公式计算，具体如下：令 $s = (l1+l2+l3) / 2$ 则面积A符合以下计算公式$A = sqrt(s(s-l1)(s-l2)(s-l3))$。

## 三角形重心坐标空间

在图形学种经常用会用到相对于三角形做操作，因此为了方便计算需要建立一个以三角形为空间的坐标系，称为重心坐标系。在重心坐标系种以三角形三个顶点为单位向量(eg: $v1 = (1,0,0) v2 = (0,1,0) v3 = (0,0,1)$), 顶点对应的边上所有点对应重心坐标分量为0，且任何一点的重心坐标$(b1,b2,b3)$满足$b1+b2+b3 = 1$ 如下图：

![[Pic_035.png]]

由重心空间坐标转化到世界空间坐标任然使用以下计算公式： $(vbx, vby, vbz) = b1*v1 + b2*v2 + b3*v3$($v1$,$v2$,$v3$为三角形三个顶点的世界坐标点)

![[Pic_036.png]]

三角形内任意一点P的重心坐标计算永远也可以用于如下公式：$b1 = A(T1) / A(T)$   $b2 = A(T2) / A(T)$  $b3 = A(T3) / A(T)$   其中A(T)表示整个三角形面积。

## 三角形的几个特殊点

重心(质心)是三角形重量的中心也是三角形的最佳平衡点是三个顶点的几何平均值 $c = (v1+v2+v3) / 3$重心坐标系下坐标为$(1/3, 1/3, 1/3)$     内心是三角形内接圆的中心也是到三条边距离都相等的点，假设三角形周长 $p = l1+l2+l3$  则内心在重心系下的坐标为: $(l1/p, l2/p, l3/p)$     外心是到三角形三个顶点距离都相等的点也就是三角形外接圆的圆心， 定义变量如下:         $d1 = - e2 . e3$   $d2 = -e3 . e1$   $d3 = -e1 . e2$           $c1 = d2d3$   $c2 = d3d1$  $c3 = d1d2$   $c=c1+c2+c3$  则外心在重心坐标系下的坐标为： $((c2+c3)/2c, (c3+c1)/2c. (c1+c2)/2c)$   外接圆的半径为:   $r = sqrt((d1+d2)(d2+d3)(d3+d1)/c) / 2$。

# 总结

- 直线，射线，线段在图形学中使用最多应该还是射线，一般用起点和终点来描述，或者使用起点方向长度描述
- 球一般用顶点和半径来描述，常作为包围球来使用，球的表面积=$4Pi*r²$ 球的体积=$4/3*Pi *r³$
- 平面方程$ax+by+cz=d$  其中平面的法线为$(a,b,c)$平面到原点的距离为$d$
- 三角形重心坐标系可以复制计算三角形中点的坐标