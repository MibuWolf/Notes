---
tags:
  - maths
---

# 1. 空间与基向量

## 1.1 共线
共线是指量向量的方向向量相同，也就是说当向量a经过一定缩放(乘以数字n)可以变成向量b时，我们认为向量a，向量b共线。

## 1.2 基向量

n维空间中可以用任意n个不共线的向量来描述这个空间，这n个不共线的向量就可以认为是此空间的一个坐标系，每个向量代表一个轴向，而这个向量也就被称为基向量。

## 1.3 向量与基向量的

任意的一个向量都可以看做相对于此空间特定坐标系的位置偏移。eg: 将二维坐标系中x轴定义为基向量$i=(1,0)$ 将y轴定义为基向量$j=(0,1)$。那么向量$v=(-1,2)$就可以看做$v = -1*i + 2*j$。

![[数学基础/3D数学基础/attachments/Pic_004.png]]

# 2. 线性变换

是指从A空间(坐标系)转化到B空间(坐标系)后原点保持不变，切在A空间中的直线到B空间后仍然是直线(没有发生形变)。就图形学来说，线性变换指的是仅有旋转和缩放的变换，没有位移变化(原点保持不变)

# 3. 空间转换

## 3.1 空间转换

计算原坐标系(原坐标系基向量为$i(1,0)$ $j(0,1)$)下向量(向量$v(-1,2)$)经过线性变换到新坐标系(新坐标系基向量为$i(1,-2)$ $j(3,0)$)下的过程就要做空间转换。

![[数学基础/3D数学基础/attachments/Pic_005.png]]

由上图可以看原来的向量v在新的基向量下的坐标为$v = -1*Transformed i + 2*Transformed j;$新基向量在原坐标系下的坐标为$Transformed i =(1,-2) Transformed j = (3,0)$。

所以向量$v = -1*Transformed i + 2*Transformed j = -1*[1,-2] + 2*[3, 0] =(-1*1+2*3,-1*-2 + 2 *0) = (5,2);$ $(5,2)$就可以理解为$(-1,2)$线性变化到$(Transformed i ,Transformed j)$空间后的坐标。

## 3.2 向量(坐标)的空间转换

 由此可以扩展出原来坐标系中的任意点$(x,y)$经过线性变换到以$(Transformed i , Transformed j)$为基向量的空间后的坐标计算如下：$(x,y)$ ---->(转化)  $x*(1,-2) + y*(3,0) = (1x +3y, -2x +0y)$。

![[数学基础/3D数学基础/attachments/Pic_006.png]]

由以上结论可以推导出目标坐标系为任意基向量时的计算公式。假设x轴为$(a,c)$ ，y轴为$(b,d)$。则任意向量$(x,y)$转化到此空间下向量的计算如下:
$(x,y)$ ---->(转化)  $x*(a,b) + y*(c,d) = (ax +cy, bx +dy)$。

# 4. 矩阵

## 4.1 矩阵的几何意义


 可见真正与转化结果有关系的只有新空间的基向量组成的数据块，我们将此数据块称为2x2矩阵，它的图形学含义就是转化到以(a,c)为x轴，(b,d)为y轴空间下的变换矩阵。

![[数学基础/3D数学基础/attachments/Pic_007.png]]

## 4.2 矩阵与向量乘法的几何意义

矩阵的乘法或者说坐标转化就可以理解为坐标在新的基向量上的映射,而新的基向量组成的数据块就是矩阵。

![[数学基础/3D数学基础/attachments/Pic_008.png]]

# 5. 矩阵的乘法与复合空间变换

## 5.1 复合变换

 当一个向量进行多次变换时，这一系列的变换就称为复合变换。

## 5.2 复合变换的矩阵表述

假设向量$v=(x,y)$,先经过$M1=([a,c],[b,d])$矩阵空间转化，再经过$M2=([e,g],[f,h])$矩阵空间变换,$v$转换到$M1$空间的向量$v1=M1*v$， $v1$再经过$M2$的转换变成最终向量$v2 = M2*v1$, 所以最终$v2 =M2*M1*v, M2*M1$就是矩阵乘法，其表示的含义也就是复合空间变换。

## 5.3 矩阵乘法的几何意义

矩阵乘法的计算可以看做x，y轴两个基向量的计算，简单来说就是M1表示的两个基向量转化到M2空间的计算。

![[数学基础/3D数学基础/attachments/Pic_009.png]]

# 6. 总结

- 图形学中的空间转换都是线性变换
- $n*n$矩阵表示的只是$n$维空间下的旋转及缩放变化并不包含位移信息，这也就是为什么$3*3$矩阵只能描述空间旋转和缩放信息不能描述位置信息的原因(如果需要带位置信息则需要4*4矩阵)
- $n*n$矩阵的每一维的含义其实是该空间里各个轴向的向量（至于横向表示轴向还是纵向表示轴向，完全取决于用户定义，如果矩阵中横向表示轴向向量则向量的定义一定要是横向的，如果矩阵中纵向表示轴向，向量则向量的定义一定也要是纵向的。也就是说矩阵的基向量定义方向与向量定义方向相同）本质原因是向量也是一种特殊的矩阵（一行/列）而矩阵的相乘一定是$m*n$维矩阵可以与$n*o$维矩阵相乘。
- 矩阵$M2*M1$示的含义是先经过$M1$转换再经过$M2$转换
- 矩阵$M2*M1$可以理解为$M1$矩阵的$x,y$轴的基向量经过$M2$变换形成新的$x，y$轴基向量，而此时两个基向量形成的矩阵就是经过$M1$变化再经过$M2$变化后的最终矩阵。（本质上就是两个轴向量的变换）
- 向量乘以矩阵的含义表示的是该向量经过矩阵(旋转缩放)同样变换后得到的新向量(经过矩阵变换后的向量的位置朝向等可能都会放生变化)。
- 如果是同一个向量$v$（注意：此处向量并未发生变化只是以不同的空间对其描述，也就是说$v$本身没有变换只是以$M1$坐标系来描述其坐标为$p1$,以$M2$坐标系来描述其坐标为$p2$）假设在M1空间的坐标是$p1$，在$M2$空间的坐标是$p2$则： $v= p1*M1 = p2 *M2$ 如果已知$M2$则 $p2 = p1*M1*M2^-1$（eg
  例如$M1$是世界空间为单位矩阵$p1$为世界空间的点，$M2$为相机自身空间矩阵则$p2$表示$p1$点在相机空间的坐标。由上述计算公式$p1 * M1 *M2$的逆矩阵就可以算出在相机空间的坐标 ）。