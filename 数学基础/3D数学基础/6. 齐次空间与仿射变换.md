
---
tags:
  - maths
---

# 齐次坐标与齐次空间

## 齐次坐标

齐次坐标本质上是$4D$向量$(x,y,z,w)$,在$w=1$处的三维空间定义为标准的3D空间，任何齐次坐标转化到标准3D空间坐标点为$(x/w.y/w,z/w),$如果$w$为0时$(x,y,z,0)$表示的是标准3D空间的方向$(x,y,z)$而并非坐标点。

## 4X4齐次矩阵

由于表示三维空间的$3x3$矩阵只能表示旋转和缩放不能表示移动，当我们使用齐次矩阵时就可以表示平移,旋转,缩放。可以将一个齐次矩阵拆分为只包含$3x3$的矩阵部分(包含旋转缩放)和只包含位移的矩阵部分

![[Pic_025.png]]
![[Pic_026.png]]

## 齐次坐标的几何含义

我们知道齐次坐标$(x,y,z,1)$可以表示在$w=1$处的三维空间的坐标点，那么扩展一下在$w$不为0时$(wx,wy,wz,w)$与$(x,y,z,1)$表示的含义相同都表示$(x,y,z)$点坐标(参见齐次坐标定义)那么齐次坐标的几何含义就是过原点与$w=1$的直线在$w=1$位置的投影。四维齐次坐标比较难以理解，我们可以想象下三维齐次坐标$(x,y,w)$表示的二维空间的点$(x/w, y/w,1)$。eg:$(-1,-0.5,1)$为齐次坐标表示$(-1,-0.5)$这个点，$(-2,-1,2)$的齐次坐标实际上也是表示$(-1,-0.5)$这个坐标点，如下图:

![[Pic_027.png]]

可以非常明显的看出$av=(x,y,z)~(x/z.y/z.1)$(含义是齐次空间$(x,y,z)$等价于$(x/z.yy/z.1))$表示过原点的$av$直线在$w=1$的投影。

# 仿射变换

将一个矩形转化为另一个矩形的过程就是仿射变换，整个过程可以按照以下三个步骤进行，将矩形移动到原点，缩放矩形到目标大小，移动矩形到目标位置

![[Pic_028.png]]
![[Pic_029.png]]

同理由以上二维空间可以引申到三维空间的仿射变换矩阵为:

![[Pic_030.png]]

# 向量沿矩阵变换与向量的空间转换

## 向量沿矩阵变换

 矩阵$M$是由该空间的坐标轴基向量组成，表示一个新的坐标系（可以理解为将原坐标系经过平移旋转缩放后形成新的坐标系），原坐标系下向量$v$与该矩阵$M$相乘的含义是将向量$v$经过矩阵$M$相同的平移旋转缩放变换后形成的新的向量。可以想象原坐标系为模型的本地空间，矩阵$M$表示该模型在世界空间的位置朝向等信息，模型上的顶点与该模型世界空间的矩阵$M$乘积其实就是将该顶点经过模型相同的位移旋转缩放到达世界空间的新的坐标点。

## 向量的空间转换

向量的空间转换与简单的矩阵转换不同，其本质是向量$v$在新的坐标系的描述，而向量$v$本身并未发生任何变化。假设坐标轴空间矩阵为$M1$，新坐标轴空间为$M2$，向量为在$M1$空间的坐标为$v1$，在$M2$空间的坐标为$v2$。已知$v1,M1,M2$计算v2的过程叫做向量的空间转换，或者叫做向量转化到M2空间的坐标。由于向量本身没有变化，所以 $v = v1*M1 = v2 *M2$   等式两边同时呈上M2矩阵的逆矩阵可以得出:   $v = v1*M1*M2-1 = v2 *M2*M2-1 = v2$  如果$M2$为正交矩阵 $M2 -1 = M2^T$（转置矩阵）

# 总结

- 齐次坐标的定义是$n$维空间在$w=1$处的$n-1$维空间的坐标点
- 齐次坐标的几何含义是将经过原点的直线投影到某一维度为1位置的点，eg: 当把$(x,y,z)$可以看作齐次坐标时，它表示的是二维坐标点$(x/z, y/z,1)$，表示的含义是$(x,y,z)$所形成的直线在z = 1平面投影的点（$x,y)$。也就是说齐次坐标可以作为向某个特定轴向投影得到的坐标点。
- 向量乘以矩阵表示的是该向量按照矩阵的变换轨迹运动后形成新的向量，而同一个向量保持不变，在不同坐标系空间内的坐标叫做空间转换，$v2 = v1 *M1*M2^-1$
- 仿射变换矩阵为:

	![[Pic_031.png]]
