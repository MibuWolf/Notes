---
tags:
  - DesignPatterns
---

# 1 概述

面向对象的语言的学习和使用相比脚本语言更为复杂，而使用面向对象语言架构和设计出复杂的系统或工程则更为困难。这是因为我们在面向对象设计时，既要考虑SOLID的基本原则，又希望其满足灵活性和复用性。实际上即便是一个非常有经验的面向对象的开发者也会告诉你：要一下子就满足所有原则而做出好的设计，即使不是不可能的，至少也是非常困难的。

本系列文章的目的就是将面向对象软件设计经验作为设计模式记录下来，使我们可以更加简单方便地复用成功的设计和体系结构。简而言之，设计模式可以帮助我们更快更好的完成系统设计。

# 2. SOLID基本原则

## 2.1 SOLID概述

在程序设计领域SOLID代指了面向对象编程和面向对象设计的5个基本原则。只有遵循这5个基本原则，程序员才更能够设计出易维护，易扩展的软件系统。 Solid所包含的原则是程序员进行架构设计和代码重构时所应该重点关注的坏味道的代码，将有坏味道的代码整理，清理重构为符合SOLID原则的代码，则会使得整个系统更加清晰易懂并具有更高的可扩展性。

## 2.2 SOLID内容

### 2.2.1 单一职责原则(Single Responsibility Principle)

单一职责原则的定义很简单，对于一个类而言应该只有一个引用引起它的变化，其中变化的原因就是这个类的职责，它可能是某个特定领域的功能，可能是某个需求的解决方案。

**简单来说就是，不要让一个类承担过多的责任，一个类应该仅具有一种单一功能的概念。**

这是因为一个类一旦有了多个职责，那么他就越容易因为这个职责而被改变，这样就代表这个类的状态是不稳定的，不经意的修改就很有可能影响到这个类的其他功能。

### 2.2.2 开闭原则(Open-Close Principle)

**开****闭原则指的是软件中的对象/类/模块等应该是对扩展开放的，但是对于修改是封闭的。对扩展开放的**含义是添加新的代码就可以让程序行为扩展来满足需求的变化。**修改封闭的**，表示在扩展程序行为时不要修改已有代码，进而避免影响原有功能。

简单来说，开闭原则就是希望在不修改现有代码的情况下去扩展和修改系统需求。

### 2.2.3 里氏替换原则(Liskov Substitution Principle)

里氏替换原则的基本定义为，在不影响程序正常性的基础上，所有使用基类的地方都能够使用其子类的对象来进行替换。

简单来说，如果程序代码符合里氏替换原则，需要保证子类继承父类时除添加新的方法完成新的功能外，尽量不要去重写父类的方法，换句话说也就是子类可以扩展父类的功能，但不要改变父类原有的功能。

### 2.2.4 接口隔离原则(Interface Segregation Principle)

接口隔离原则认为多个特定用户端接口要好于一个宽泛用途的接口。这也就意味着用户不应该依赖那些他不需要的接口，用户应该只依赖它实际使用的方法，因为如果一个接口具备了若干个方法，那就意味着它的实现类要实现所有的接口方法，从代码结构上就会十分臃肿。

### 2.2.5 依赖倒置原则(Dependency Inversion Principle)

依赖倒置原则认为一个方法应该遵从依赖抽象而不是一个实例的概念。也就是说高层模块不应该依赖低层模块，应该共同依赖抽象抽象，不应该依赖细节，细节应该依赖抽象。

控制反转，依赖注入IOC就是该原则的一种实现方式。

## 2.3 其他设计和开发原则

### 2.3.1 不要重复你自己原则(Donot Repeat Yourself)

该原则是指系统中的每一部分都必须有一个单一的明确的权威的代表。这也就意味着代码所构成的系统必须能够表达所应表达的内容，但是不能含有任何重复代码。

这也很容易理解，因为一个函数写多次就意味着我们有多个地方需要同时维护，极大的增加了开发和维护成本，但有时在某些特定的情况下，为了可读性或者避免耦合或者避免过早的重构，也可以放弃该原则。

### 2.3.2 KISS原则(Keep It Simple Stupid)

该原则顾名思义指的是在设计过程当中应尽量注重简约的原则。也就是说大多数系统的设计应该保持简洁和单纯不应该掺入不必要的复杂性，这样的系统运作成效会取得最优。

### 2.3.3 GRASP设计原则(General Responsibility Assignment Software Pattern)

GRASP设计原则指的是物件导向设计和职责分配中的九个基本原则。这九个原则具体包括：信息专家原则，创造者原则， 低耦合原则，高内聚原则，控制器原则，多态原则，纯虚构原则，中介原则和保护变化原则。

# 3. 设计模式

设计模式就是将面向对象软件开发设计经验作为设计模式记录下来，每一种设计模式都是为了解决特定某一类的设计问题，使其更加符合上文中的各种设计原则。

根据设计模式的目的可以将设计模式分为创建型，结构型和行为型三种设计模式。创建型模式与对象的创建有关。结构型模式用于处理类或对象的组合关系。行为型模式对类或对象怎样交互，以及怎样分配职责进行处理和描述。

根据作用范围可以将模式划分为用于类或对象的模式。类模式处理类和子类之间的关系，这些关系通过继承建立是静态的在编译时就确立的。对象模式处理对象间的关系，这些关系在运行时是可变的，动态的。

我们将从设计目的出发，分别介绍创建型，结构型和行为型三种类型的具体设计模式。并在讨伦每个具体设计模式介绍其为对象模式或是类模式。

当我们进行系统设计或框架重构时，我们需要先明确我们面临的具体问题：需要解决的是对象创建的问题或者是对象之间的关系类之间的关系的问题，还是类或对象行为职责的问题。此外还要明确我们的目标，我们要达到的重构的目标是为了解耦还是为了更容易扩展。在明确了这些问题后，就可以在相应的具体设计模式中寻找答案。

此外设计模式也为我们提供了很多分析和处理问题的基本思路，例如封装变化，将对象作为参数等。更多关于设计模式的内容，我们将在后续三个章节中详细讨论23种设计模式。