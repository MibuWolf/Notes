
---
tags:
  - maths lighting illumination
---

# 常用的光源类型

点光源，平行光，和 探射光三种光源是最常见的三种光源类型，广泛应用在各平台，以下就分类型简单介绍三中类型光源。

## 点光源

点光源也被称为球形光，是从光源位置均匀向各个方向发出光线，并且关照强度随距离光源的距离变大而减弱形成一个球形范围。

![[Pic_061.png]]

## 探照灯

从光源位置向某一朝向射出光线，在一定范围内衰减，形成一个照亮区域为圆锥形或者金字塔形的照明区域。圆锥底部由衰减角定义。

![[Pic_062.png]]

## 平行光

一般用来模拟太阳光无固定发射源，所有光线朝同一方向且不会衰减。

# 光照衰减

在真实世界中光的辐射度与距离的平放成反比即：

![[Pic_063.png]]

$i$为光的辐射度，$d$为距离光源位置。得出这一推论并不难，原因是将光的发射想象成为一个球，随着半径的增大球的表面积为$4*Pi*r²$,辐射度 = 辐射通量/面积。因此可以推定光的衰减公式。但此公式在图形学中并不好用，一方面当$d=0$时按公式辐射度是无限大，第二方面光的辐射度永远不会为0。因此一般使用较为简单的线性衰减的方式模拟图形学中的衰减;

![[Pic_064.png]]

# 体积光(Doom3版)

体积光技术最早在Doom3引擎中使用并随后普及，其建立的光照模型也很新颖易用。在Doom3引擎的体积光模型中使用两张贴图来存储光照颜色和强度信息，第一张贴图被称为遮光板贴图(gobo)用于存储光照颜色和光照区域形状（遮光板最处用于舞台，在灯光前增加遮光板用于控制在舞台地板打出各种各样灯光图案）。另一张是衰减贴图用于存储光照强度信息。对一表面进行光照计算时先在遮光板贴图中采样去除光照颜色再在衰减贴图中采样取出光照强弱，相乘之后获取表面光照信息。

## Doom版体积光实现

Doom版体积光将光照范围限定在一个矩形空间内，以正交投影(各方向匀减弱)/透视投影的方式对遮光板贴图采样。例如：在矩形空间内光源在中心点则空间内任意一点(空间坐标系)坐标可以用以下矩阵映射为三维坐标$(x,y,z),xy$为遮光板$uv$坐标 $z$为亮度采样坐标。

![[Pic_065.png]]

$y$轴之所以应用$-1/sy$是因为纹理坐标yy的0在上方1在下方。1/2的目的是将每个轴向的坐标归一化到$(0,1)$.。用此矩阵模拟的是点光源的效果各个方向的衰减是一致的。如果要模拟聚光灯效果则需要投影效果，矩阵如下：

![[Pic_066.png]]

以下为Doom版体积光的效果：

![[Pic_067.png]]

# 总结

- 常见光源：点光源，平行光，探照光
- 自然接光的辐射度的衰减跟距离的平方成反比（根据球表面积公式推断出来）
- 图形学中对光的衰减可以简单按照距离的反比计算
- Doom体积光的原理是用遮光板贴图描述光的颜色和光的区域形状，用衰减度贴图描述光照强度衰减情况。
- Doom体积光是Doom3引擎在2003年使用的方式，并非效果做好现如今并非主流，有机会在学习现在主流的体积光制作方式。 