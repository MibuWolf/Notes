---
tags:
  - ue unreal metahuman riglogic DNA
---

# 1. 概述

DNA文件是MetaHuman中非常重要的一个资源配置文件，整个NDA文件中不仅保存了当前角色的基本信息，还保存了控制器与骨骼的绑定关系，基础表情单元(AU)及表情矫正的动作,MorphTarget信息，甚至还有蒙皮，混合形变及纹理动画等相关信息。

DNA相当于美术离线制作的一个效果文件(可以类比想象成一个带模型的动作文件)，而RigLogic的作用则是从DNA数据中采样数据并驱动骨骼，BlendShape(MorphTarget)，材质效果等发生作用。具体来说，运行时通过播放表情动画文件或者Sequencer修复几百根与表情相关的曲线值，RigLogic负责将几百个曲线值整理成一维Float数组作为输入，去DNA数据中查询当前表情的骨骼，BlendShape，动画贴图等数据，并通过调用相应功能接口最终实现表情动画效果。

**注：关于带有几百条曲线的表情动画的制作导出方式，请参见：[MetaHuman文档 | Epic Developer Community (epicgames.com)](https://dev.epicgames.com/documentation/zh-cn/metahuman/metahuman-documentation)**

# 2. DNA数据结构

## 2.1 DNA文件基本结构

在[[RigLogicWhitePaper.pdf]]及官方提供的DNA矫正工具[EpicGames/MetaHuman-DNA-校准 (github.com)](https://github.com/EpicGames/MetaHuman-DNA-Calibration/)文档中都有提及